// https://nuxt.com/docs/api/configuration/nuxt-config
export default defineNuxtConfig({
  compatibilityDate: '2025-07-15',
  devtools: { enabled: true },
  
  // å¼•å…¥å…¨å±€æ ·å¼ï¼ˆæ³¨æ„é¡ºåºï¼šfonts.css -> variables.css -> main.scssï¼?  css: [
    '~/assets/styles/fonts.css',
    '~/assets/styles/variables.css',
    '~/assets/styles/main.scss',
    'katex/dist/katex.min.css'
  ],
  
  // æ¨¡å—é…ç½®
  modules: [
    '@nuxt/icon',
    '@nuxt/image',
    '@nuxtjs/color-mode'
  ],
  
  // Color Mode é…ç½®
  colorMode: {
    classSuffix: '', // ä½¿ç”¨ .dark ç±»åè€Œä¸æ˜?.dark-mode
    preference: 'system', // é»˜è®¤è·Ÿéšç³»ç»Ÿ
    fallback: 'light'
  },
  
  // Image æ¨¡å—é…ç½®
  image: {
    provider: 'ipx',
    format: ['webp'],
    quality: 80,
    screens: {
      xs: 320,
      sm: 640,
      md: 768,
      lg: 1024,
      xl: 1280,
      xxl: 1536,
      '2xl': 1536
    }
  },
  
  // App Head Configuration (SEO Meta Tags)
  // Extracted from _config.yml
  app: {
    head: {
      title: 'FomalhautğŸ¥',
      titleTemplate: '%s - FomalhautğŸ¥',
      htmlAttrs: {
        lang: 'zh-CN'
      },
      meta: [
        { charset: 'utf-8' },
        { name: 'viewport', content: 'width=device-width, initial-scale=1' },
        { 
          name: 'description', 
          content: 'Future is now ğŸ­ğŸ­ğŸ­'
        },
        { 
          name: 'keywords', 
          content: 'Java,MySQL,ç®—æ³•,ä»£ç ,åšå®¢,Butterfly,Hexo,FomalhautğŸ¥,Fomalhaut'
        },
        { 
          name: 'author', 
          content: 'FomalhautğŸ¥'
        },
        { 
          name: 'language', 
          content: 'zh-CN'
        },
        // Open Graph / Facebook
        { property: 'og:type', content: 'website' },
        { property: 'og:title', content: 'FomalhautğŸ¥' },
        { property: 'og:description', content: 'Future is now ğŸ­ğŸ­ğŸ­' },
        { property: 'og:site_name', content: 'FomalhautğŸ¥' },
        { property: 'og:url', content: 'https://www.fomal.cc/' },
        { property: 'og:locale', content: 'zh_CN' },
        // Twitter
        { name: 'twitter:card', content: 'summary_large_image' },
        { name: 'twitter:title', content: 'FomalhautğŸ¥' },
        { name: 'twitter:description', content: 'Future is now ğŸ­ğŸ­ğŸ­' }
      ],
      link: [
        { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }
      ]
    },
    // é¡µé¢è¿‡æ¸¡é…ç½®
    pageTransition: {
      name: 'page',
      mode: 'out-in'
    }
  },
  
  // Runtime é…ç½®
  runtimeConfig: {
    // æœåŠ¡ç«¯å¯è®¿é—®çš„é…ç½?(Server-side only)
    // è¿™äº›é…ç½®ä¸ä¼šæš´éœ²ç»™å®¢æˆ·ç«¯ï¼Œåªèƒ½é€šè¿‡ useRuntimeConfig() åœ¨æœåŠ¡ç«¯è®¿é—®
    mongodbUri: process.env.NUXT_MONGODB_URI || process.env.NUXT_MONGO_URI,
    mongoUri: process.env.NUXT_MONGODB_URI || process.env.NUXT_MONGO_URI, // å…¼å®¹æ—§é…ç½?    adminUsername: process.env.NUXT_ADMIN_USERNAME,
    adminPassword: process.env.NUXT_ADMIN_PASSWORD,
    authSecret: process.env.NUXT_AUTH_SECRET || 'default_secret_please_change',
    
    // å…¬å¼€ç»™å®¢æˆ·ç«¯çš„é…ç½?(Client-side accessible)
    public: {
      siteUrl: process.env.NUXT_PUBLIC_SITE_URL || 'https://www.fomal.cc/',
      // ç»Ÿè®¡æœåŠ¡æä¾›å•? 'umami' | '51la' | 'other'
      analyticsProvider: process.env.NUXT_PUBLIC_ANALYTICS_PROVIDER || 'umami',
      // ç»Ÿè®¡åˆ†äº«é“¾æ¥ (Umami Share URL æˆ?51.LA æŠ¥è¡¨åˆ†äº«é“¾æ¥)
      analyticsShareUrl: process.env.NUXT_PUBLIC_ANALYTICS_SHARE_URL || ''
    }
  },
  
  // Nitro é…ç½®
  nitro: {
    // å…è®¸æ–‡ä»¶å†™å…¥
    storage: {
      // å¯ä»¥åœ¨è¿™é‡Œé…ç½®å­˜å‚¨é€‰é¡¹
    }
  }
})
